# Deployment Guide

## Backend Deployment (Railway)

### Prerequisites

1. Railway CLI installed: `npm install -g @railway/cli`
2. Railway account linked: `railway login`

### Environment Variables

Copy `.env.example` to your Railway environment:

```bash
# Required for Railway
HOST=0.0.0.0
PORT=8000
ENV=production

# Redis (from Railway Redis service)
REDIS_URL=redis://railway-redis-host:6379/0

# External APIs
ARXIV_API_URL=http://export.arxiv.org/api/query
DOAJ_API_URL=https://doaj.org/api/search/articles
CROSSREF_API_URL=https://api.crossref.org/works
GETTY_API_URL=https://vocab.getty.edu/sparql

# Clerk Authentication
CLERK_SECRET_KEY=your_clerk_secret_key
CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key

# CORS (Update with your Vercel domain)
CORS_ORIGINS=https://your-app.vercel.app,http://localhost:3000
```

### Deploy Backend

```bash
railway up
```

## Frontend Deployment (Vercel)

### Prerequisites

1. Vercel CLI: `npm install -g vercel`
2. Vercel account linked: `vercel login`

### Environment Variables

Copy `.env.local.example`:

```bash
# Backend URL (from Railway deployment)
NEXT_PUBLIC_API_URL=https://your-backend.railway.app
NEXT_PUBLIC_GRAPHQL_URL=https://your-backend.railway.app/graphql

# Clerk (Frontend)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key
CLERK_SECRET_KEY=your_clerk_secret_key
```

### Deploy Frontend

```bash
vercel --prod
```

## Post-Deployment

1. Update CORS_ORIGINS in Railway with your Vercel domain
2. Test connectivity: `curl https://your-backend.railway.app/health`
3. Verify frontend can reach backend APIs

## Health Checks

- Backend health: `/health`
- GraphQL playground: `/graphql`
- API documentation: Auto-generated by FastAPI
